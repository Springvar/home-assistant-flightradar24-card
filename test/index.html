<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Flightradar24 Card Demo</title>
  <script type="module" src="../flightradar24-card.js"></script>
  <style>
    :root {
      --primary-color: #03a9f4;
      --accent-color: #ff9800;
      --primary-background-color: #fafafa;
      --secondary-background-color: #e0e0e0;
      --ha-card-background: #fff;
      --ha-card-box-shadow: 0px 2px 4px rgba(0,0,0,0.12);
      --primary-text-color: #212121;
      --secondary-text-color: #757575;
      --info-color: #2196f3;
      --success-color: #43a047;
      --warning-color: #fb8c00;
      --error-color: #c0392b;
      --dark-primary-color: #262626;
    }
    body {
      background: #fafafa;
      font-family: sans-serif;
      margin: 0;
      padding: 2em;
    }
    flightradar24-card {
      max-width: 800px;
      display: block;
      margin: 2em auto;
    }
  </style>
</head>
<body>
  <flightradar24-card id="fr24card"></flightradar24-card>
  <script>
    // Code generated by MCHP Chatbot
    const dummyFlights = [
      {
        id: "TEST001",
        flight_number: "FR24",
        callsign: "FLIGHT1",
        aircraft_registration: "N12345",
        aircraft_model: "B738",
        aircraft_code: "B738",
        airline: "TestAir",
        airline_short: "TA",
        airline_iata: "TA",
        airline_icao: "TST",
        airport_origin_name: "Origin Airport",
        airport_origin_code_iata: "ORG",
        airport_origin_country_name: "Norway",
        airport_origin_country_code: "NO",
        airport_destination_name: "Demo Airport",
        airport_destination_code_iata: "DST",
        airport_destination_country_name: "UK",
        airport_destination_country_code: "GB",
        latitude: 51.543,
        longitude: 0.280,              // 30km east of runway center
        altitude: 1200,
        vertical_speed: -400,
        ground_speed: 150,
        heading: 270,
        distance_to_tracker: 30,
        heading_from_tracker: 90,
        cardinal_direction_from_tracker: "E",
        approach_indicator: "↓"
      },
      {
        id: "TEST002",
        flight_number: "FR24X",
        callsign: "FLIGHT2",
        aircraft_registration: "G67890",
        aircraft_model: "A320",
        aircraft_code: "A320",
        airline: "FakeJet",
        airline_short: "FJ",
        airline_iata: "FJ",
        airline_icao: "FKJ",
        airport_origin_name: "Demo Airport",      // Updated for realism
        airport_origin_code_iata: "DST",
        airport_origin_country_name: "UK",
        airport_origin_country_code: "GB",
        airport_destination_name: "Third Airport",
        airport_destination_code_iata: "THD",
        airport_destination_country_name: "Sweden",
        airport_destination_country_code: "SE",
        latitude: 51.541,
        longitude: -0.157,
        altitude: 300,
        vertical_speed: 1800,
        ground_speed: 160,
        heading: 310,
        distance_to_tracker: 0.5,
        heading_from_tracker: 310,
        cardinal_direction_from_tracker: "NW",
        approach_indicator: "↑"
      }
    ];

    const dummyHass = {
      states: {
        "sensor.flightradar24_current_in_area": {
          attributes: {
            flights: dummyFlights
          }
        }
      },
      config: {
        latitude: 51.51,
        longitude: -0.13
      },
      connection: {
        subscribeEvents: (fn, event) => {
        }
      }
    };

    const cardConfig = {
      units: { altitude: "ft", speed: "kts", distance: "km" },
      flights_entity: "sensor.flightradar24_current_in_area",
      projection_interval: 5,
      no_flights_message: "No flights available in demo.",
      list: {
        hide: false
      },
      radar: {
        hide: false,
        range: 40,
        local_features: [
          {
            type: "outline",
            points: [
              { lat: 51.546, lon: -0.162 },
              { lat: 51.545, lon: -0.150 },
              { lat: 51.544, lon: -0.145 },
              { lat: 51.541, lon: -0.143 },
              { lat: 51.538, lon: -0.149 },
              { lat: 51.537, lon: -0.157 },
              { lat: 51.538, lon: -0.162 },
              { lat: 51.541, lon: -0.165 },
              { lat: 51.544, lon: -0.164 },
              { lat: 51.546, lon: -0.162 },
            ],
            label: "Demo Airport Boundary"
          },
          {
            type: "location",
            position: { lat: 51.542, lon: -0.158 },
            label: "Demo Airport"
          },
          {
            type: "runway",
            position: { lat: 51.543, lon: -0.155 },
            heading: 90,
            length: 3900,
            label: "Runway 09/27"
          },
          {
            type: "runway",
            position: { lat: 51.542, lon: -0.159 },
            heading: 180,
            length: 2800,
            label: "Runway 18/36"
          },
          {
            type: "runway",
            position: { lat: 51.541, lon: -0.157 },
            heading: 135,
            length: 1800,
            label: "Runway 13/31"
          }
        ]
      }
    };

    window.customElements.whenDefined('flightradar24-card').then(() => {
      const card = document.getElementById('fr24card');
      card.setConfig(cardConfig);
      card.hass = dummyHass;
    });
  </script>
</body>
</html>